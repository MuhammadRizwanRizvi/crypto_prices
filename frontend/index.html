<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <title>Crypto Prices</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Early theme application to avoid flicker -->
  <script>
    const saved = localStorage.getItem('theme');
    if (saved === 'dark' || (!saved && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.documentElement.classList.add('dark');
    }
  </script>

  <!-- Tailwind CDN and dark mode config -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { darkMode: 'class' }
  </script>

  <style>
    :root {
      --grad-start: #7c3aed;
      --grad-mid: #06b6d4;
      --grad-end: #f43f5e;
    }
    .neon-gradient {
      background-image: linear-gradient(135deg, var(--grad-start), var(--grad-mid), var(--grad-end));
    }
  </style>

  <link rel="stylesheet" href="/frontend/style.css">
</head>
<body class="bg-slate-50 text-slate-900 dark:bg-slate-950 dark:text-slate-100 transition-colors duration-300">
  <main class="max-w-6xl mx-auto px-4 py-6">
    <!-- Single unified board -->
    <div class="relative overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg dark:border-slate-700 dark:bg-slate-900">
      <!-- Board top row: title + controls -->
      <div class="px-4 py-4 border-b border-slate-200 dark:border-slate-800">
        <div class="grid grid-cols-12 items-center gap-4">
          <div class="col-span-12 md:col-span-4">
            <div class="flex items-center gap-3">
              <div class="w-9 h-9 rounded-lg bg-gradient-to-br from-fuchsia-500 via-cyan-400 to-rose-500 ring-1 ring-white/20 flex items-center justify-center">
                <span class="text-white text-lg font-semibold">â‚¿</span>
              </div>
              <h1 class="text-xl md:text-2xl font-bold tracking-tight">Crypto Prices</h1>
            </div>
          </div>
          <div class="col-span-12 md:col-span-6">
            <div class="flex flex-wrap gap-3">
              <input id="search" type="text" placeholder="Search coins..."
                     class="w-full md:w-72 px-3.5 py-2.5 rounded-lg border border-slate-300 bg-white text-slate-900 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-cyan-400 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100 dark:placeholder-slate-400" />
              <select id="filter"
                      class="w-full md:w-56 px-3.5 py-2.5 rounded-lg border border-slate-300 bg-white text-slate-900 focus:outline-none focus:ring-2 focus:ring-pink-400 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100">
                <option value="all">All</option>
                <option value="gainers">Gainers (24h)</option>
                <option value="losers">Losers (24h)</option>
              </select>
            </div>
          </div>
          <div class="col-span-12 md:col-span-2">
            <div class="flex items-center justify-start md:justify-end gap-2">
              <span class="text-sm text-slate-600 dark:text-slate-300"></span>
              <div class="relative inline-block w-12 h-6">
                <input id="toggle-theme" type="checkbox"
                       class="peer appearance-none w-12 h-6 rounded-full bg-slate-300 ring-1 ring-slate-300 cursor-pointer transition-colors duration-300 checked:bg-slate-700 dark:bg-slate-700 dark:ring-slate-600 dark:checked:bg-slate-300" />
                <label for="toggle-theme"
                       class="absolute top-0 left-0 w-6 h-6 bg-slate-700 rounded-full shadow transition-transform duration-300 peer-checked:translate-x-6 cursor-pointer dark:bg-slate-100"></label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Board column header row -->
      <div class="grid grid-cols-12 px-4 py-3 text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300">
        <div class="col-span-6">Coin</div>
        <div class="col-span-3 text-right">Price</div>
        <div class="col-span-3 text-right">% 24h</div>
      </div>

      <!-- Board data table -->
      <table id="coin-table" class="w-full">
        <thead class="hidden">
          <tr>
            <th>Coin</th>
            <th>Price</th>
            <th>% 24h</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-slate-100 dark:divide-slate-800"></tbody>
      </table>

      <!-- Single in-board floating, scrollable detail panel -->
      <div id="hover-detail"
           class="hidden absolute z-20 left-1/2 -translate-x-1/2 top-4 w-[92%] max-w-2xl rounded-xl border border-slate-200 bg-white shadow-xl dark:border-slate-700 dark:bg-slate-900">
        <div class="p-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between">
          <h2 id="panel-title" class="text-lg font-semibold text-slate-900 dark:text-slate-100">Details</h2>
          <button id="close-panel"
                  class="px-3 py-1.5 rounded-lg bg-slate-900 text-white hover:opacity-90 transition dark:bg-slate-100 dark:text-slate-900">
            Close
          </button>
        </div>
        <div id="panel-content"
             class="p-4 max-h-80 overflow-y-auto prose max-w-none text-slate-900 dark:prose-invert dark:text-slate-100">
          <!-- Populated by JS with Date/Price columns -->
        </div>
      </div>
    </div>
  </main>

  <script src="/frontend/app.js"></script>
</body>
</html>
